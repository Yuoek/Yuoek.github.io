<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/fly32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/fly16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/pink/pace-theme-bounce.css">
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"yuoek.github.io","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.11.0","exturl":false,"sidebar":{"position":"left","width":200,"display":"always","padding":8,"offset":8},"copycode":true,"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":true,"comments":{"style":"livere","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":true,"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"ÊêúÁ¥¢...","empty":"Ê≤°ÊúâÊâæÂà∞‰ªª‰ΩïÊêúÁ¥¢ÁªìÊûúÔºö${query}","hits_time":"ÊâæÂà∞ ${hits} ‰∏™ÊêúÁ¥¢ÁªìÊûúÔºàÁî®Êó∂ ${time} ÊØ´ÁßíÔºâ","hits":"ÊâæÂà∞ ${hits} ‰∏™ÊêúÁ¥¢ÁªìÊûú"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="309. Best Time to Buy and Sell Stock with Cooldown ‰∏≠ÊñáÊñáÊ°£ Description">
<meta property="og:type" content="article">
<meta property="og:title" content="309. Best Time to Buy and Sell Stock with Cooldown">
<meta property="og:url" content="https://yuoek.github.io/zh/309-best-time-to-buy-and-sell-stock-with-cooldown.html">
<meta property="og:site_name" content="Sophie">
<meta property="og:description" content="309. Best Time to Buy and Sell Stock with Cooldown ‰∏≠ÊñáÊñáÊ°£ Description">
<meta property="og:locale">
<meta property="article:published_time" content="2025-05-05T04:00:19.000Z">
<meta property="article:modified_time" content="2025-06-21T02:42:32.907Z">
<meta property="article:author" content="Yuoek">
<meta property="article:tag" content="leetcode">
<meta property="article:tag" content="Medium">
<meta property="article:tag" content="Array">
<meta property="article:tag" content="Dynamic Programming">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://yuoek.github.io/zh/309-best-time-to-buy-and-sell-stock-with-cooldown.html">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh","comments":true,"permalink":"https://yuoek.github.io/zh/309-best-time-to-buy-and-sell-stock-with-cooldown.html","path":"zh/309-best-time-to-buy-and-sell-stock-with-cooldown.html","title":"309. Best Time to Buy and Sell Stock with Cooldown"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>309. Best Time to Buy and Sell Stock with Cooldown | Sophie</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="ÂàáÊç¢ÂØºËà™Ê†è" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Sophie</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>È¶ñÈ°µ</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>ÂÖ≥‰∫é</a></li><li class="menu-item menu-item-schedule"><a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>Êó•Á®ãË°®</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Ê†áÁ≠æ<span class="badge">136</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>ÂàÜÁ±ª<span class="badge">35</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>ÂΩíÊ°£<span class="badge">233</span></a></li><li class="menu-item menu-item-life"><a href="/life/" rel="section"><i class="fa fa-happy fa-fw"></i>ÁîüÊ¥ª0123</a></li><li class="menu-item menu-item-quotes"><a href="/quotes/" rel="section"><i class="fa fa-pen fa-fw"></i>‰∏ÄË®Ä‰∏ÄË°å</a></li><li class="menu-item menu-item-poetry"><a href="/poetry/" rel="section"><i class="fa fa-book fa-fw"></i>ËØóÊ≠åÁæéÊñá</a></li><li class="menu-item menu-item-paint"><a href="/paint/" rel="section"><i class="fa fa-paint-brush fa-fw"></i>ÂÆ°ÁæéÁªòÁîª</a></li><li class="menu-item menu-item-music"><a href="/music/" rel="section"><i class="fa fa-music fa-fw"></i>Â£∞Èü≥‰πêÁ´†</a></li><li class="menu-item menu-item-film"><a href="/film/" rel="section"><i class="fa fa-film fa-fw"></i>ÂÖâÂΩ±ËßÜÂê¨</a></li><li class="menu-item menu-item-switch_lang"><a href="/en" rel="section"><i class="fa fa-language fa-fw"></i>switch_lang</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>ÊêúÁ¥¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="ÊêúÁ¥¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          ÊñáÁ´†ÁõÆÂΩï
        </li>
        <li class="sidebar-nav-overview">
          YuoekÈÉ®Â±ã
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#best-time-to-buy-and-sell-stock-with-cooldown"><span class="nav-number">1.</span> <span class="nav-text">309.
Best Time to Buy and Sell Stock with Cooldown</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#description"><span class="nav-number">1.1.</span> <span class="nav-text">Description</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#solutions"><span class="nav-number">1.2.</span> <span class="nav-text">Solutions</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#solution-1-memoization-search"><span class="nav-number">1.2.1.</span> <span class="nav-text">Solution 1: Memoization
Search</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#python3"><span class="nav-number">1.2.1.1.</span> <span class="nav-text">Python3</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#java"><span class="nav-number">1.2.1.2.</span> <span class="nav-text">Java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#c"><span class="nav-number">1.2.1.3.</span> <span class="nav-text">C++</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#go"><span class="nav-number">1.2.1.4.</span> <span class="nav-text">Go</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#typescript"><span class="nav-number">1.2.1.5.</span> <span class="nav-text">TypeScript</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#solution-2-dynamic-programming"><span class="nav-number">1.2.2.</span> <span class="nav-text">Solution 2: Dynamic
Programming</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#python3-1"><span class="nav-number">1.2.2.1.</span> <span class="nav-text">Python3</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#java-1"><span class="nav-number">1.2.2.2.</span> <span class="nav-text">Java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#c-1"><span class="nav-number">1.2.2.3.</span> <span class="nav-text">C++</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#go-1"><span class="nav-number">1.2.2.4.</span> <span class="nav-text">Go</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#typescript-1"><span class="nav-number">1.2.2.5.</span> <span class="nav-text">TypeScript</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#solution-3"><span class="nav-number">1.2.3.</span> <span class="nav-text">Solution 3</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#python3-2"><span class="nav-number">1.2.3.1.</span> <span class="nav-text">Python3</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#java-2"><span class="nav-number">1.2.3.2.</span> <span class="nav-text">Java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#c-2"><span class="nav-number">1.2.3.3.</span> <span class="nav-text">C++</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#go-2"><span class="nav-number">1.2.3.4.</span> <span class="nav-text">Go</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#typescript-2"><span class="nav-number">1.2.3.5.</span> <span class="nav-text">TypeScript</span></a></li></ol></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Yuoek"
      src="/images/fly512.png">
  <p class="site-author-name" itemprop="name">Yuoek</p>
  <div class="site-description" itemprop="description">ÈÅáÂÖâËßÅÂΩ±, ÈÅá‰Ω†ËßÅÁà±</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">233</span>
          <span class="site-state-item-name">Êó•Âøó</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">35</span>
        <span class="site-state-item-name">ÂàÜÁ±ª</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">136</span>
        <span class="site-state-item-name">Ê†áÁ≠æ</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/jeanyng" title="GitHub ‚Üí https:&#x2F;&#x2F;github.com&#x2F;jeanyng" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:2055048783@qq.com" title="E-Mail ‚Üí mailto:2055048783@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="ËøîÂõûÈ°∂ÈÉ®">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
	  <br>
	   <br>
	   <p>
	   <br>
	   </p>
	   <p style="margin-top: 0px; margin-bottom: 0px; color:#ff013c; font-size: 14px;">üíÆ‰∏Ä‰∏ä‰∏Ä‰∏äÂèà‰∏Ä‰∏äüå∏</p>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh">
    <link itemprop="mainEntityOfPage" href="https://yuoek.github.io/zh/309-best-time-to-buy-and-sell-stock-with-cooldown.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/fly512.png">
      <meta itemprop="name" content="Yuoek">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sophie">
      <meta itemprop="description" content="ÈÅáÂÖâËßÅÂΩ±, ÈÅá‰Ω†ËßÅÁà±">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="309. Best Time to Buy and Sell Stock with Cooldown | Sophie">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          309. Best Time to Buy and Sell Stock with Cooldown
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">ÂèëË°®‰∫é</span>

      <time title="ÂàõÂª∫Êó∂Èó¥Ôºö2025-05-05 12:00:19" itemprop="dateCreated datePublished" datetime="2025-05-05T12:00:19+08:00">2025-05-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Êõ¥Êñ∞‰∫é</span>
      <time title="‰øÆÊîπÊó∂Èó¥Ôºö2025-06-21 10:42:32" itemprop="dateModified" datetime="2025-06-21T10:42:32+08:00">2025-06-21</time>
    </span>

  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <!-- problem:start -->
<h1 id="best-time-to-buy-and-sell-stock-with-cooldown"><a
target="_blank" rel="noopener" href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-with-cooldown">309.
Best Time to Buy and Sell Stock with Cooldown</a></h1>
<p><a
href="/solution/0300-0399/0309.Best%20Time%20to%20Buy%20and%20Sell%20Stock%20with%20Cooldown/README.md">‰∏≠ÊñáÊñáÊ°£</a></p>
<h2 id="description">Description</h2>
<span id="more"></span>


<p>You are given an array <code>prices</code> where <code>prices[i]</code> is the price of a given stock on the <code>i<sup>th</sup></code> day.</p>

<p>Find the maximum profit you can achieve. You may complete as many transactions as you like (i.e., buy one and sell one share of the stock multiple times) with the following restrictions:</p>

<ul>
	<li>After you sell your stock, you cannot buy stock on the next day (i.e., cooldown one day).</li>
</ul>

<p><strong>Note:</strong> You may not engage in multiple transactions simultaneously (i.e., you must sell the stock before you buy again).</p>

<p>&nbsp;</p>
<p><strong class="example">Example 1:</strong></p>

<pre>
<strong>Input:</strong> prices = [1,2,3,0,2]
<strong>Output:</strong> 3
<strong>Explanation:</strong> transactions = [buy, sell, cooldown, buy, sell]
</pre>

<p><strong class="example">Example 2:</strong></p>

<pre>
<strong>Input:</strong> prices = [1]
<strong>Output:</strong> 0
</pre>

<p>&nbsp;</p>
<p><strong>Constraints:</strong></p>

<ul>
	<li><code>1 &lt;= prices.length &lt;= 5000</code></li>
	<li><code>0 &lt;= prices[i] &lt;= 1000</code></li>
</ul>


<h2 id="solutions">Solutions</h2>
<!-- solution:start -->
<h3 id="solution-1-memoization-search">Solution 1: Memoization
Search</h3>
<p>We design a function <span class="math inline">\(dfs(i, j)\)</span>,
which represents the maximum profit that can be obtained starting from
the <span class="math inline">\(i\)</span>th day with state <span
class="math inline">\(j\)</span>. The values of <span
class="math inline">\(j\)</span> are <span
class="math inline">\(0\)</span> and <span
class="math inline">\(1\)</span>, respectively representing currently
not holding a stock and holding a stock. The answer is <span
class="math inline">\(dfs(0, 0)\)</span>.</p>
<p>The execution logic of the function <span
class="math inline">\(dfs(i, j)\)</span> is as follows:</p>
<p>If <span class="math inline">\(i \geq n\)</span>, it means that there
are no more stocks to trade, so return <span
class="math inline">\(0\)</span>;</p>
<p>Otherwise, we can choose not to trade, then <span
class="math inline">\(dfs(i, j) = dfs(i + 1, j)\)</span>. We can also
trade stocks. If <span class="math inline">\(j &gt; 0\)</span>, it means
that we currently hold a stock and can sell it, then <span
class="math inline">\(dfs(i, j) = prices[i] + dfs(i + 2, 0)\)</span>. If
<span class="math inline">\(j = 0\)</span>, it means that we currently
do not hold a stock and can buy, then <span class="math inline">\(dfs(i,
j) = -prices[i] + dfs(i + 1, 1)\)</span>. Take the maximum value as the
return value of the function <span class="math inline">\(dfs(i,
j)\)</span>.</p>
<p>The answer is <span class="math inline">\(dfs(0, 0)\)</span>.</p>
<p>To avoid repeated calculations, we use the method of memoization
search, and use an array <span class="math inline">\(f\)</span> to
record the return value of <span class="math inline">\(dfs(i,
j)\)</span>. If <span class="math inline">\(f[i][j]\)</span> is not
<span class="math inline">\(-1\)</span>, it means that it has been
calculated, and we can directly return <span
class="math inline">\(f[i][j]\)</span>.</p>
<p>The time complexity is <span class="math inline">\(O(n)\)</span>, and
the space complexity is <span class="math inline">\(O(n)\)</span>, where
<span class="math inline">\(n\)</span> is the length of the array <span
class="math inline">\(prices\)</span>.</p>
<!-- tabs:start -->
<h4 id="python3">Python3</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">maxProfit</span>(<span class="params">self, prices: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line"><span class="meta">        @cache</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">i: <span class="built_in">int</span>, j: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">            <span class="keyword">if</span> i &gt;= <span class="built_in">len</span>(prices):</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">            ans = dfs(i + <span class="number">1</span>, j)</span><br><span class="line">            <span class="keyword">if</span> j:</span><br><span class="line">                ans = <span class="built_in">max</span>(ans, prices[i] + dfs(i + <span class="number">2</span>, <span class="number">0</span>))</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                ans = <span class="built_in">max</span>(ans, -prices[i] + dfs(i + <span class="number">1</span>, <span class="number">1</span>))</span><br><span class="line">            <span class="keyword">return</span> ans</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dfs(<span class="number">0</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<h4 id="java">Java</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] prices;</span><br><span class="line">    <span class="keyword">private</span> Integer[][] f;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span>[] prices)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.prices = prices;</span><br><span class="line">        f = <span class="keyword">new</span> <span class="title class_">Integer</span>[prices.length][<span class="number">2</span>];</span><br><span class="line">        <span class="keyword">return</span> dfs(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &gt;= prices.length) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (f[i][j] != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> f[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">ans</span> <span class="operator">=</span> dfs(i + <span class="number">1</span>, j);</span><br><span class="line">        <span class="keyword">if</span> (j &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            ans = Math.max(ans, prices[i] + dfs(i + <span class="number">2</span>, <span class="number">0</span>));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            ans = Math.max(ans, -prices[i] + dfs(i + <span class="number">1</span>, <span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[i][j] = ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="c">C++</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = prices.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> f[n][<span class="number">2</span>];</span><br><span class="line">        <span class="built_in">memset</span>(f, <span class="number">-1</span>, <span class="built_in">sizeof</span>(f));</span><br><span class="line">        function&lt;<span class="type">int</span>(<span class="type">int</span>, <span class="type">int</span>)&gt; dfs = [&amp;](<span class="type">int</span> i, <span class="type">int</span> j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &gt;= n) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (f[i][j] != <span class="number">-1</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> f[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">int</span> ans = <span class="built_in">dfs</span>(i + <span class="number">1</span>, j);</span><br><span class="line">            <span class="keyword">if</span> (j) &#123;</span><br><span class="line">                ans = <span class="built_in">max</span>(ans, prices[i] + <span class="built_in">dfs</span>(i + <span class="number">2</span>, <span class="number">0</span>));</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                ans = <span class="built_in">max</span>(ans, -prices[i] + <span class="built_in">dfs</span>(i + <span class="number">1</span>, <span class="number">1</span>));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> f[i][j] = ans;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">dfs</span>(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="go">Go</h4>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">maxProfit</span><span class="params">(prices []<span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	n := <span class="built_in">len</span>(prices)</span><br><span class="line">	f := <span class="built_in">make</span>([][<span class="number">2</span>]<span class="type">int</span>, n)</span><br><span class="line">	<span class="keyword">for</span> i := <span class="keyword">range</span> f &#123;</span><br><span class="line">		f[i] = [<span class="number">2</span>]<span class="type">int</span>&#123;<span class="number">-1</span>, <span class="number">-1</span>&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">var</span> dfs <span class="function"><span class="keyword">func</span><span class="params">(i, j <span class="type">int</span>)</span></span> <span class="type">int</span></span><br><span class="line">	dfs = <span class="function"><span class="keyword">func</span><span class="params">(i, j <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> i &gt;= n &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> f[i][j] != <span class="number">-1</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> f[i][j]</span><br><span class="line">		&#125;</span><br><span class="line">		ans := dfs(i+<span class="number">1</span>, j)</span><br><span class="line">		<span class="keyword">if</span> j &gt; <span class="number">0</span> &#123;</span><br><span class="line">			ans = max(ans, prices[i]+dfs(i+<span class="number">2</span>, <span class="number">0</span>))</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			ans = max(ans, -prices[i]+dfs(i+<span class="number">1</span>, <span class="number">1</span>))</span><br><span class="line">		&#125;</span><br><span class="line">		f[i][j] = ans</span><br><span class="line">		<span class="keyword">return</span> ans</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> dfs(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="typescript">TypeScript</h4>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">maxProfit</span>(<span class="params">prices: <span class="built_in">number</span>[]</span>): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> n = prices.<span class="property">length</span>;</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">f</span>: <span class="built_in">number</span>[][] = <span class="title class_">Array</span>.<span class="title function_">from</span>(&#123; <span class="attr">length</span>: n &#125;, <span class="function">() =&gt;</span> <span class="title class_">Array</span>.<span class="title function_">from</span>(&#123; <span class="attr">length</span>: <span class="number">2</span> &#125;, <span class="function">() =&gt;</span> -<span class="number">1</span>));</span><br><span class="line">    <span class="keyword">const</span> dfs = (<span class="attr">i</span>: <span class="built_in">number</span>, <span class="attr">j</span>: <span class="built_in">number</span>): <span class="function"><span class="params">number</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &gt;= n) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (f[i][j] !== -<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> f[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> ans = <span class="title function_">dfs</span>(i + <span class="number">1</span>, j);</span><br><span class="line">        <span class="keyword">if</span> (j) &#123;</span><br><span class="line">            ans = <span class="title class_">Math</span>.<span class="title function_">max</span>(ans, prices[i] + <span class="title function_">dfs</span>(i + <span class="number">2</span>, <span class="number">0</span>));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            ans = <span class="title class_">Math</span>.<span class="title function_">max</span>(ans, -prices[i] + <span class="title function_">dfs</span>(i + <span class="number">1</span>, <span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (f[i][j] = ans);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">dfs</span>(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<!-- tabs:end -->
<!-- solution:end -->
<!-- solution:start -->
<h3 id="solution-2-dynamic-programming">Solution 2: Dynamic
Programming</h3>
<p>We can also use dynamic programming to solve this problem.</p>
<p>We define <span class="math inline">\(f[i][j]\)</span> to represent
the maximum profit that can be obtained on the <span
class="math inline">\(i\)</span>th day with state <span
class="math inline">\(j\)</span>. The values of <span
class="math inline">\(j\)</span> are <span
class="math inline">\(0\)</span> and <span
class="math inline">\(1\)</span>, respectively representing currently
not holding a stock and holding a stock. Initially, <span
class="math inline">\(f[0][0] = 0\)</span>, <span
class="math inline">\(f[0][1] = -prices[0]\)</span>.</p>
<p>When <span class="math inline">\(i \geq 1\)</span>, if we currently
do not hold a stock, then <span class="math inline">\(f[i][0]\)</span>
can be obtained by transitioning from <span class="math inline">\(f[i -
1][0]\)</span> and <span class="math inline">\(f[i - 1][1] +
prices[i]\)</span>, i.e., <span class="math inline">\(f[i][0] = \max(f[i
- 1][0], f[i - 1][1] + prices[i])\)</span>. If we currently hold a
stock, then <span class="math inline">\(f[i][1]\)</span> can be obtained
by transitioning from <span class="math inline">\(f[i - 1][1]\)</span>
and <span class="math inline">\(f[i - 2][0] - prices[i]\)</span>, i.e.,
<span class="math inline">\(f[i][1] = \max(f[i - 1][1], f[i - 2][0] -
prices[i])\)</span>. The final answer is <span class="math inline">\(f[n
- 1][0]\)</span>.</p>
<p>The time complexity is <span class="math inline">\(O(n)\)</span>, and
the space complexity is <span class="math inline">\(O(n)\)</span>, where
<span class="math inline">\(n\)</span> is the length of the array <span
class="math inline">\(prices\)</span>.</p>
<p>We notice that the transition of state <span
class="math inline">\(f[i][]\)</span> is only related to <span
class="math inline">\(f[i - 1][]\)</span> and <span
class="math inline">\(f[i - 2][0]\)</span>, so we can use three
variables <span class="math inline">\(f\)</span>, <span
class="math inline">\(f_0\)</span>, <span
class="math inline">\(f_1\)</span> to replace the array <span
class="math inline">\(f\)</span>, optimizing the space complexity to
<span class="math inline">\(O(1)\)</span>.</p>
<!-- tabs:start -->
<h4 id="python3-1">Python3</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">maxProfit</span>(<span class="params">self, prices: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        n = <span class="built_in">len</span>(prices)</span><br><span class="line">        f = [[<span class="number">0</span>] * <span class="number">2</span> <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n)]</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">1</span>] = -prices[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n):</span><br><span class="line">            f[i][<span class="number">0</span>] = <span class="built_in">max</span>(f[i - <span class="number">1</span>][<span class="number">0</span>], f[i - <span class="number">1</span>][<span class="number">1</span>] + prices[i])</span><br><span class="line">            f[i][<span class="number">1</span>] = <span class="built_in">max</span>(f[i - <span class="number">1</span>][<span class="number">1</span>], f[i - <span class="number">2</span>][<span class="number">0</span>] - prices[i])</span><br><span class="line">        <span class="keyword">return</span> f[n - <span class="number">1</span>][<span class="number">0</span>]</span><br></pre></td></tr></table></figure>
<h4 id="java-1">Java</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span>[] prices)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> prices.length;</span><br><span class="line">        <span class="type">int</span>[][] f = <span class="keyword">new</span> <span class="title class_">int</span>[n][<span class="number">2</span>];</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">1</span>] = -prices[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">            f[i][<span class="number">0</span>] = Math.max(f[i - <span class="number">1</span>][<span class="number">0</span>], f[i - <span class="number">1</span>][<span class="number">1</span>] + prices[i]);</span><br><span class="line">            f[i][<span class="number">1</span>] = Math.max(f[i - <span class="number">1</span>][<span class="number">1</span>], (i &gt; <span class="number">1</span> ? f[i - <span class="number">2</span>][<span class="number">0</span>] : <span class="number">0</span>) - prices[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n - <span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="c-1">C++</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = prices.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> f[n][<span class="number">2</span>];</span><br><span class="line">        <span class="built_in">memset</span>(f, <span class="number">0</span>, <span class="built_in">sizeof</span>(f));</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">1</span>] = -prices[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            f[i][<span class="number">0</span>] = <span class="built_in">max</span>(f[i - <span class="number">1</span>][<span class="number">0</span>], f[i - <span class="number">1</span>][<span class="number">1</span>] + prices[i]);</span><br><span class="line">            f[i][<span class="number">1</span>] = <span class="built_in">max</span>(f[i - <span class="number">1</span>][<span class="number">1</span>], (i &gt; <span class="number">1</span> ? f[i - <span class="number">2</span>][<span class="number">0</span>] : <span class="number">0</span>) - prices[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n - <span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="go-1">Go</h4>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">maxProfit</span><span class="params">(prices []<span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	n := <span class="built_in">len</span>(prices)</span><br><span class="line">	f := <span class="built_in">make</span>([][<span class="number">2</span>]<span class="type">int</span>, n)</span><br><span class="line">	f[<span class="number">0</span>][<span class="number">1</span>] = -prices[<span class="number">0</span>]</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">1</span>; i &lt; n; i++ &#123;</span><br><span class="line">		f[i][<span class="number">0</span>] = max(f[i<span class="number">-1</span>][<span class="number">0</span>], f[i<span class="number">-1</span>][<span class="number">1</span>]+prices[i])</span><br><span class="line">		<span class="keyword">if</span> i &gt; <span class="number">1</span> &#123;</span><br><span class="line">			f[i][<span class="number">1</span>] = max(f[i<span class="number">-1</span>][<span class="number">1</span>], f[i<span class="number">-2</span>][<span class="number">0</span>]-prices[i])</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			f[i][<span class="number">1</span>] = max(f[i<span class="number">-1</span>][<span class="number">1</span>], -prices[i])</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> f[n<span class="number">-1</span>][<span class="number">0</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="typescript-1">TypeScript</h4>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">maxProfit</span>(<span class="params">prices: <span class="built_in">number</span>[]</span>): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> n = prices.<span class="property">length</span>;</span><br><span class="line">    <span class="keyword">const</span> <span class="attr">f</span>: <span class="built_in">number</span>[][] = <span class="title class_">Array</span>.<span class="title function_">from</span>(&#123; <span class="attr">length</span>: n &#125;, <span class="function">() =&gt;</span> <span class="title class_">Array</span>.<span class="title function_">from</span>(&#123; <span class="attr">length</span>: <span class="number">2</span> &#125;, <span class="function">() =&gt;</span> <span class="number">0</span>));</span><br><span class="line">    f[<span class="number">0</span>][<span class="number">1</span>] = -prices[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        f[i][<span class="number">0</span>] = <span class="title class_">Math</span>.<span class="title function_">max</span>(f[i - <span class="number">1</span>][<span class="number">0</span>], f[i - <span class="number">1</span>][<span class="number">1</span>] + prices[i]);</span><br><span class="line">        f[i][<span class="number">1</span>] = <span class="title class_">Math</span>.<span class="title function_">max</span>(f[i - <span class="number">1</span>][<span class="number">1</span>], (i &gt; <span class="number">1</span> ? f[i - <span class="number">2</span>][<span class="number">0</span>] : <span class="number">0</span>) - prices[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> f[n - <span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<!-- tabs:end -->
<!-- solution:end -->
<!-- solution:start -->
<h3 id="solution-3">Solution 3</h3>
<!-- tabs:start -->
<h4 id="python3-2">Python3</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">maxProfit</span>(<span class="params">self, prices: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        f, f0, f1 = <span class="number">0</span>, <span class="number">0</span>, -prices[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> prices[<span class="number">1</span>:]:</span><br><span class="line">            f, f0, f1 = f0, <span class="built_in">max</span>(f0, f1 + x), <span class="built_in">max</span>(f1, f - x)</span><br><span class="line">        <span class="keyword">return</span> f0</span><br></pre></td></tr></table></figure>
<h4 id="java-2">Java</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxProfit</span><span class="params">(<span class="type">int</span>[] prices)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">f</span> <span class="operator">=</span> <span class="number">0</span>, f0 = <span class="number">0</span>, f1 = -prices[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; prices.length; ++i) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">g0</span> <span class="operator">=</span> Math.max(f0, f1 + prices[i]);</span><br><span class="line">            f1 = Math.max(f1, f - prices[i]);</span><br><span class="line">            f = f0;</span><br><span class="line">            f0 = g0;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f0;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="c-2">C++</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maxProfit</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> f = <span class="number">0</span>, f0 = <span class="number">0</span>, f1 = -prices[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; prices.<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">            <span class="type">int</span> g0 = <span class="built_in">max</span>(f0, f1 + prices[i]);</span><br><span class="line">            f1 = <span class="built_in">max</span>(f1, f - prices[i]);</span><br><span class="line">            f = f0;</span><br><span class="line">            f0 = g0;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f0;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="go-2">Go</h4>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">maxProfit</span><span class="params">(prices []<span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">	f, f0, f1 := <span class="number">0</span>, <span class="number">0</span>, -prices[<span class="number">0</span>]</span><br><span class="line">	<span class="keyword">for</span> _, x := <span class="keyword">range</span> prices[<span class="number">1</span>:] &#123;</span><br><span class="line">		f, f0, f1 = f0, max(f0, f1+x), max(f1, f-x)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> f0</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="typescript-2">TypeScript</h4>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">maxProfit</span>(<span class="params">prices: <span class="built_in">number</span>[]</span>): <span class="built_in">number</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> [f, f0, f1] = [<span class="number">0</span>, <span class="number">0</span>, -prices[<span class="number">0</span>]];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> x <span class="keyword">of</span> prices.<span class="title function_">slice</span>(<span class="number">1</span>)) &#123;</span><br><span class="line">        [f, f0, f1] = [f0, <span class="title class_">Math</span>.<span class="title function_">max</span>(f0, f1 + x), <span class="title class_">Math</span>.<span class="title function_">max</span>(f1, f - x)];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> f0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<!-- tabs:end -->
<!-- solution:end -->
<!-- problem:end -->

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/leetcode/" rel="tag"># leetcode</a>
              <a href="/tags/Medium/" rel="tag"># Medium</a>
              <a href="/tags/Array/" rel="tag"># Array</a>
              <a href="/tags/Dynamic-Programming/" rel="tag"># Dynamic Programming</a>
          </div>

        


          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/zh/309-%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E6%97%B6%E6%9C%BA%E5%90%AB%E5%86%B7%E5%86%BB%E6%9C%9F.html" rel="prev" title="309. ‰π∞ÂçñËÇ°Á•®ÁöÑÊúÄ‰Ω≥Êó∂Êú∫Âê´ÂÜ∑ÂÜªÊúü">
                  <i class="fa fa-chevron-left"></i> 309. ‰π∞ÂçñËÇ°Á•®ÁöÑÊúÄ‰Ω≥Êó∂Êú∫Âê´ÂÜ∑ÂÜªÊúü
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/zh/310-%E6%9C%80%E5%B0%8F%E9%AB%98%E5%BA%A6%E6%A0%91.html" rel="next" title="310. ÊúÄÂ∞èÈ´òÂ∫¶Ê†ë">
                  310. ÊúÄÂ∞èÈ´òÂ∫¶Ê†ë <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>
	
  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2022 ‚Äì 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class=""></i>
  </span>
  
  <span class="author" itemprop="copyrightHolder">Yuoek</span>
  
</div><script color="255,165,0" opacity="0.7" zIndex="-2" count="110" src="https://cdn.jsdelivr.net/npm/canvas-nest.js@1/dist/canvas-nest.js"></script>




    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>

  <script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdn.jsdelivr.net/npm/pdfobject@2.2.7/pdfobject.min.js","integrity":"sha256-ph3Dk89VmuTVXG6x/RDzk53SU9LPdAh1tpv0UvnDZ2I="},"url":"/lib/pdf/web/viewer.html"}</script>
  <script src="/js/third-party/tags/pdf.js"></script>

  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdn.jsdelivr.net/npm/mermaid@8.14.0/dist/mermaid.min.js","integrity":"sha256-7wT34TI0pEBeEFoi4z+vhuSddGh6vUTMWdqJ2SDe2jg="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>

  <script src="/js/third-party/fancybox.js"></script>

  <script src="/js/third-party/pace.js"></script>

  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>




<canvas
    id="background"
    style="position:fixed;top:0;left:0;width:100vw;height:100vh;pointer-events:none;z-index:-1"
></canvas>
<script src="/js/background.js"></script>

<canvas
    id="fireworks"
    style="position:fixed;top:0;left:0;width:100vw;height:100vh;pointer-events:none;z-index:2147483647"
></canvas>
<script src="/js/fireworks.js"></script>

        <style>
            [bg-lazy] {
                background-image: none !important;
                background-color: #eee !important;
            }
        </style>
        <script>
            window.imageLazyLoadSetting = {
                isSPA: true,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(r){r.imageLazyLoadSetting.processImages=t;var e=r.imageLazyLoadSetting.isSPA,n=r.imageLazyLoadSetting.preloadRatio||1,c=a();function a(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function t(){e&&(c=a());for(var t,o=0;o<c.length;o++)0<=(t=(t=c[o]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(r.innerHeight*n||document.documentElement.clientHeight*n)&&function(){var t,e,n,a,i=c[o];e=function(){c=c.filter(function(t){return i!==t}),r.imageLazyLoadSetting.onImageLoaded&&r.imageLazyLoadSetting.onImageLoaded(i)},(t=i).hasAttribute("bg-lazy")?(t.removeAttribute("bg-lazy"),e&&e()):(n=new Image,a=t.getAttribute("data-original"),n.onload=function(){t.src=a,t.removeAttribute("data-original"),e&&e()},t.src!==a&&(n.src=a))}()}function i(){clearTimeout(t.tId),t.tId=setTimeout(t,500)}t(),document.addEventListener("scroll",i),r.addEventListener("resize",i),r.addEventListener("orientationchange",i)}(this);</script></body>
</html>
